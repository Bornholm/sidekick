(function(){var e=this.Sidekick=this.Sidekick||{};e.has=function(e,t){var n,r,i,s=t._modulesMarks;if(s)for(n=0,r=s.length;n<r;++n){i=s[n];if(i===e)return!0}return!1},e._mark=function(e,t){var n=t._modulesMarks=t._modulesMarks||[];n.push(e)}})(),function(){var e=this.Sidekick=this.Sidekick||{},t={};e.module=function(e,n){if(arguments.length===1)return t[e];arguments.length===2&&(t[e]=n)}}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(e,t){var n;for(n in e)t[n]=e[n]},n=function(){return function(){this.initialize.apply(this,arguments)}};e.entity=function(r,i){i=i||[];var s,o,u,a=n();p=a.prototype,t(r,p),e.module("entity").call(p);for(s=0,o=i.length;s<o;++s){u=e.module(i[s]);if(!u)throw new Error('Module "'+i[s]+'" is undefined !');u.call(p)}return a}}(),function(){var e=this.Sidekick=this.Sidekick||{},t=Array.prototype.push,n=function(){},r=function(){this.before=function(e,t){var r=this[e]||n;this[e]=function(){return t.apply(this,arguments),r.apply(this,arguments)}},this.after=function(e,t){var r=this[e]||n;this[e]=function(){return r.apply(this,arguments),t.apply(this,arguments)}},this.wrap=function(e,r){var i=this[e]||n;this[e]=function(){var e=[i];return t.apply(e,arguments),r.apply(this,e)}},e._mark("helpers",this)};e.module("helpers",r)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){!e.has("helpers",this)&&e.module("helpers").call(this),e._mark("entity",this),!this.initialize&&(this.initialize=function(){}),!this.update&&(this.update=function(e){}),!this.render&&(this.render=function(e){})};e.module("entity",t)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){!e.has("entity",this)&&e.module("entity").call(this),e._mark("game",this),this.before("initialize",function(){this._entities=[],this._clock={t:0,lastCall:Date.now(),accumulator:0}}),this.getInterval=function(){return 1/this._fps},this.setInterval=function(e){this._fps=1/e},this.getFPS=function(){return this._fps},this.setFPS=function(e){this._fps=e},this.clearEntities=function(){this._entities.length=0},this.addEntity=function(e){e.game=this,this._entities.push(e)},this.removeEntity=function(e){var t,n,r,i=this._entities;for(t=0,n=i.length;t<n;++t)if(i[t]===e){delete e.game,i.splice(t,1);return}},this.update=function(e,t){var n,r,i=this._entities;for(n=0,r=i.length;n<r;++n)i[n].update(e,t)},this.render=function(e){var t,n,r=this._entities;for(t=0,n=r.length;t<n;++t)r[t].render(e)},this.run=function(e){var t,n=this,r=n._clock,i=n.getInterval()*1e3,s=Date.now(),o=s-r.lastCall;r.lastCall=s,r.accumulator+=o;while(r.accumulator>=i)n.update(r.t,i),r.t+=i,r.accumulator-=i;t=r.accumulator/i,n.render(t)}};e.module("game",t)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){!e.has("helpers",this)&&e.module("helpers").call(this),e._mark("states",this),this.before("initialize",function(){this._currentStateName="default",this._states={"default":{enter:function(){},exit:function(e){e()}}},this.setState("default")}),this.getCurrentState=function(){return this._states[this._currentStateName]},this.getCurrentStateName=function(){return this._currentStateName},this.addState=function(e,t){t=t||{},t.context=this,this._states[e]=t},this.removeState=function(e){delete this._states[e]},this.stateExists=function(e){return!!this._states[e]},this.isCurrentState=function(e){return this._states[e]===this._currentStateName},this.setState=function(e){console.log("Enter State:",e);var t,n=this;if(!n.stateExists(e))throw new Error("Unknown state "+e+" !");n.isCurrentState(e)||(t=this._states[this._currentStateName],t&&t.exit?t.exit(n._afterCurrentStateExit.bind(n,e)):n._afterCurrentStateExit(e))},this.getStates=function(){return this._states},this.getState=function(e){return this._states[e]},this._afterCurrentStateExit=function(e,t){if(t)throw t;var n=this,r=n._states[e];n._currentStateName=e,r.enter&&r.enter()}};e.module("states",t)}(),function(){var e=function(){var e=Date.now(),t=e,n=0,r=Infinity,i=0,s=0,o=Infinity,u=0,a=0,f=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(e){e.preventDefault(),y(++f%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(c);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",c.appendChild(h);var p=document.createElement("div");p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(c.appendChild(p);74>p.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(d)}var v=document.createElement("div");v.id="ms",v.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(v);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",v.appendChild(m);var g=document.createElement("div");g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(v.appendChild(g);74>g.children.length;)d=document.createElement("span"),d.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(d);var y=function(e){f=e;switch(f){case 0:c.style.display="block",v.style.display="none";break;case 1:c.style.display="none",v.style.display="block"}};return{REVISION:11,domElement:l,setMode:y,begin:function(){e=Date.now()},end:function(){var f=Date.now();n=f-e,r=Math.min(r,n),i=Math.max(i,n),m.textContent=n+" MS ("+r+"-"+i+")";var l=Math.min(30,30-30*(n/200));return g.appendChild(g.firstChild).style.height=l+"px",a++,f>t+1e3&&(s=Math.round(1e3*a/(f-t)),o=Math.min(o,s),u=Math.max(u,s),h.textContent=s+" FPS ("+o+"-"+u+")",l=Math.min(30,30-30*(s/100)),p.appendChild(p.firstChild).style.height=l+"px",t=f,a=0),f},update:function(){e=this.end()}}},t=this.Sidekick=this.Sidekick||{},n=function(){!t.has("game",this)&&t.module("game").call(this),t._mark("stats",this),this.before("initialize",function(){var t=this._stats=new e;document.body.appendChild(t.domElement)}),this.before("render",function(){this._stats.begin()}),this.after("render",function(){this._stats.end()})};t.module("stats",n)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){!e.has("entity",this)&&e.module("entity").call(this),e._mark("createjs:entity",this),!this.onEntityAdd&&(this.onEntityAdd=function(){}),!this.onEntityRemove&&(this.onEntityRemove=function(){})};e.module("createjs:entity",t)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){!e.has("game",this)&&e.module("game").call(this),e._mark("createjs:game",this),this.before("initialize",function(e){createjs.Ticker.useRAF=!0,this._stage=new createjs.Stage(e)}),this.after("addEntity",function(e){this._stage.addChild(e.displayObject),e.onEntityAdd&&e.onEntityAdd()}),this.after("removeEntity",function(e){this._stage.removeChild(e.displayObject),e.onEntityRemove&&e.onEntityRemove()}),this.after("clearEntities",function(){this._stage.removeAllChildren()}),this.after("setInterval",function(e){createjs.Ticker.setInterval(e)}),this.after("setFPS",function(e){createjs.Ticker.setFPS(e)}),this.before("getFPS",function(){this._fps=createjs.Ticker.getFPS()}),this.before("getInterval",function(){this._fps=createjs.Ticker.getFPS()}),this.start=function(){createjs.Ticker.addListener(this,!0)},this.stop=function(){createjs.Ticker.removeListener(this)},this.pause=function(e){createjs.Ticker.setPaused(e)},this.tick=function(e){this.run(e)},this.getWidth=function(){return this._stage.canvas.width},this.setWidth=function(e){this._stage.canvas.width=e},this.getHeight=function(){return this._stage.canvas.height},this.setHeight=function(e){this._stage.canvas.height=e},this.getStage=function(){return this._stage},this.after("render",function(){this._stage.update()})};e.module("createjs:game",t)}(),function(){var e=this.Sidekick=this.Sidekick||{},t=function(){this.wrap("initialize",function(e){this.addState("normal"),this.addState("hover"),this.addState("active"),this.addState("disabled"),e.apply(this,arguments),this.configureMouseHandlers(),this.setState("normal")}),this.after("onEntityAdd",function(){this.game.getStage().enableMouseOver()}),this.configureMouseHandlers=function(){var e=this.displayObject,t=this,n=function(){t.getCurrentStateName()!=="normal"&&t.setState("hover")},r=function(){t.setState("normal")};if(!e)throw new Error("createjs:button must have a displayObject property !");e.onMouseOver=function(){t.setState("hover")},e.onPress=function(){t.setState("active")},e.onMouseOut=r,e.onPress=function(e){t.setState("active"),e.onMouseUp=n}},this.onClick=function(e){this.displayObject.onClick=e},this.onDoubleClick=function(e){this.displayObject.onDoubleClick=e},!e.has("createjs:entity",this)&&e.module("createjs:entity").call(this),!e.has("states",this)&&e.module("states").call(this),e._mark("createjs:button",this)};e.module("createjs:button",t)}()